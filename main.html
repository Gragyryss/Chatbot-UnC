<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chatbot UnC - Prot√≥tipo</title>
  <script src="https://cdn.tailwindcss.com"></script>


  <style>
    :root{
      --primary:#1d3557;
      --bg:#f5f5f5;
    }

  body{
    margin:0;
    font-family:Arial,system-ui,-apple-system,"Segoe UI",Roboto;

    /* üî• Aqui est√° o fundo com imagem */
    background-image: url('https://res.cloudinary.com/dwrmw2cgc/image/upload/v1765309263/premium_photo-1677567996070-68fa4181775a_sldpmt.jpg'); 
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;

    min-height: 100vh;
    -webkit-font-smoothing:antialiased;
  }

    /* Bot√£o flutuante */
    #chatToggle{
    position:fixed;
    right:25px;
    bottom:25px;
    width:80px;
    height:80px;
    border-radius:50%;
    background:var(--primary);
    color:#fff;
    border:0;
    font-size:38px;
    cursor:pointer;
    z-index:1300;

  /* anima√ß√£o adicionada */
  animation: pulse 2.6s infinite ease-in-out;
}


/* Anima√ß√£o de pulso e brilho */
@keyframes pulse {
  0% {
    transform: scale(1);
    box-shadow: 0 0 8px rgba(29, 53, 87, 0.4);
  }
  50% {
    transform: scale(1.12);
    box-shadow: 0 0 16px rgba(255, 255, 255, 0.8);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 8px rgba(29, 53, 87, 0.4);
  }
}



    /* Janela de chat (pop-up) */
    #chatWindow{
      position:fixed;
      right:30px;
      bottom:120px;
      width:360px;
      max-width:calc(100vw - 40px);
      height:520px;
      background:#fff;border-radius:12px;
      box-shadow:0 10px 30px rgba(0,0,0,.2);
      display:none;flex-direction:column;overflow:hidden;z-index:1999;
    }

    .chat-header{
      background:var(--primary);color:#fff;padding:10px 12px;
      display:flex;align-items:center;gap:10px;
    }

    .chat-avatar{ width:40px;height:40px;border-radius:50%;overflow:hidden;flex-shrink:0;}
    .chat-avatar img{width:100%;height:100%;object-fit:cover;display:block;}
    .chat-title{flex:1;font-weight:600;}

    .close-btn{cursor:pointer;font-size:20px;padding:2px 6px;border-radius:6px;background:transparent;color:#fff;border:0}

    .messages{
      flex:1;padding:12px;overflow:auto;background:linear-gradient(180deg,#fafafa,#fff);
    }

    .msg{max-width:84%;margin-bottom:10px;padding:10px 12px;border-radius:12px;line-height:1.35;word-wrap:break-word}
    .msg.user{margin-left:auto;background:var(--primary);color:#fff;border-bottom-right-radius:4px}
    .msg.bot{margin-right:auto;background:#eee;color:#111;border-bottom-left-radius:4px}

    .input-area{display:flex;padding:10px;border-top:1px solid #eee;gap:8px;background:#fafafa}
    .input-area input[type="text"]{
      flex:1;padding:10px;border:1px solid #ddd;border-radius:8px;font-size:14px;
    }
    .input-area button{background:var(--primary);color:#fff;border:0;padding:10px 14px;border-radius:8px;cursor:pointer}

    .docs-area{padding:10px;border-top:1px dashed #eee;background:#fff}
    .doc-item{background:#f4f7fb;padding:8px;border-radius:6px;margin-bottom:8px;font-size:14px}
    a.inline-link{color:var(--primary);text-decoration:none;font-weight:600}

    .actions-area{
  padding:12px;
  border-top:1px solid #eee;
  background:#fafafa;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.action-btn{
  padding:12px;
  background:var(--primary);
  color:white;
  border:0;
  border-radius:8px;
  cursor:pointer;
  font-size:15px;
  text-align:left;
  transition:0.2s;
}

.action-btn:hover{
  opacity:0.85;
}

  </style>

</head>
<body>

  <!-- Bot√£o flutuante -->
  <button id="chatToggle" aria-label="Abrir chat">üí¨</button>

  <!-- Janela de chat -->
  <div id="chatWindow" role="dialog" aria-label="Chat de atendimento">
    <div class="chat-header">
      <div class="chat-avatar">
        <!-- Substitua chatbot.png pelo arquivo que quiser -->
        <img src="https://res.cloudinary.com/dwrmw2cgc/image/upload/v1764091782/15211-1584478466055_cww1vl.jpg" alt="Avatar do chatbot" />
      </div>
      <div class="chat-title">Atendente Virtual</div>
      <button id="closeChat" class="close-btn" aria-label="Fechar chat">√ó</button>
    </div>

    <div id="messages" class="messages" aria-live="polite"></div>

    <div class="docs-area" id="docsArea" style="display:none">
      <strong>Documentos encontrados:</strong>
      <div id="docsList"></div>
    </div>

    <!-- Lista de a√ß√µes -->
<div id="actionsArea" class="actions-area">
  <button class="action-btn" data-action="documentos">üìÑ Consultar documentos</button>
  <button class="action-btn" data-action="pos">üéì Ver informa√ß√µes da p√≥s-gradua√ß√£o</button>
  <button class="action-btn" data-action="horarios">üìÖ Ver hor√°rios e aulas</button>
  <button class="action-btn" data-action="biblioteca">üìö Informa√ß√µes da biblioteca</button>
  <button class="action-btn" data-action="contato">‚òéÔ∏è Contatos da institui√ß√£o</button>
</div>


  </div>

  <script>
    // util: escape para evitar inje√ß√£o de HTML nas mensagens do usu√°rio
    function escapeHtml(text){
      const map = { '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;' };
      return String(text).replace(/[&<>"']/g, m => map[m]);
    }

    // sele√ß√£o de elementos com checagem
    const chatToggle = document.getElementById('chatToggle');
    const chatWindow = document.getElementById('chatWindow');
    const closeChat = document.getElementById('closeChat');
    const messagesEl = document.getElementById('messages');
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');
    const docsArea = document.getElementById('docsArea');
    const docsList = document.getElementById('docsList');

    // Abertura / fechamento
    chatToggle.addEventListener('click', () => {
      chatWindow.style.display = 'flex';
      userInput.focus();
    });
    closeChat.addEventListener('click', () => {
      chatWindow.style.display = 'none';
    });

    // fun√ß√£o que procura documentos por palavras-chave e retorna resposta HTML
    function botReply(text) {


  // regras simples
  if(text.includes('documento') || text.includes('formul√°rio')){
      showDocs(documentos);
      return "Aqui est√£o alguns documentos √∫teis que voc√™ pode acessar!";
  }

  if(text.includes('p√≥s') || text.includes('pos') || text.includes('especializa√ß√£o')){
      return "Os cursos de p√≥s-gradua√ß√£o est√£o dispon√≠veis no portal oficial da p√≥s.";
  }

  if(text.includes('hor√°rio') || text.includes('grade') || text.includes('aulas')){
      return "Voc√™ pode consultar os hor√°rios no Calend√°rio Acad√™mico.";
  }

  if(text.includes('biblioteca')){
      return "Informa√ß√µes da biblioteca podem ser encontradas no Sistema de Bibliotecas.";
  }

  if(text.includes('contato') || text.includes('telefone') || text.includes('email')){
      return "Secretaria Acad√™mica: secretaria@faculdade.br ‚Äî (00) 0000-0000";
  }

  return "N√£o encontrei exatamente isso. Tente perguntar por: documentos, p√≥s-gradua√ß√£o, hor√°rios, biblioteca ou contato.";
}

    function showDocs(lista){
      docsList.innerHTML = '';
      lista.forEach(d => {
        const el = document.createElement('div');
        el.className = 'doc-item';
        el.textContent = d;
        docsList.appendChild(el);
      });
      docsArea.style.display = lista.length ? 'block' : 'none';
      // rolar mensagens para baixo (opcional)
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    // mensagem de boas-vindas inicial (opcional)
    appendMessage("Ol√°! Eu sou o assistente virtual da UnC, posso te ajudar em qualquer d√∫vida que voc√™ tiver! Pergunte algo!", 'bot');

   function buscarDocumento(mensagem) {
    mensagem = mensagem.toLowerCase();

    for (let doc of documentos) {
        if (doc.palavras.some(p => mensagem.includes(p))) {
            return `Encontrei! üìÑ<br>
<strong>${doc.nome}</strong><br>
Acesse aqui: <a href="${doc.link}" target="_blank">${doc.link}</a>`;
        }
    }
    return "N√£o encontrei esse documento. Voc√™ pode escrever ele de outra forma?";
}

// A√ß√µes r√°pidas do chatbot
document.querySelectorAll(".action-btn").forEach(btn => {
  btn.addEventListener("click", () => {
      const action = btn.dataset.action;
      
      switch(action){

          case "documentos":
              appendMessage("Voc√™ selecionou: Consulta de documentos", "user");
              showDocs(documentos);
              appendMessage("Aqui est√£o os documentos dispon√≠veis para download:", "bot");
          break;

          case "pos":
              appendMessage("Voc√™ selecionou: P√≥s-gradua√ß√£o", "user");
              appendMessage("Os cursos de p√≥s-gradua√ß√£o podem ser acessados no portal oficial da UnC.", "bot");
          break;

          case "horarios":
              appendMessage("Voc√™ selecionou: Hor√°rios e Aulas", "user");
              appendMessage("Os hor√°rios das aulas est√£o dispon√≠veis no Calend√°rio Acad√™mico.", "bot");
          break;

          case "biblioteca":
              appendMessage("Voc√™ selecionou: Biblioteca", "user");
              appendMessage("A biblioteca oferece diversos servi√ßos. Consulte mais no Sistema de Bibliotecas da UnC.", "bot");
          break;

          case "contato":
              appendMessage("Voc√™ selecionou: Contatos da Institui√ß√£o", "user");
              appendMessage("Secretaria Acad√™mica: secretaria@faculdade.br ‚Äî (00) 0000-0000", "bot");
          break;
      }
  });
});


  </script>
</body>
</html>
